---
- name: Process secrets
  hosts: localhost
  vars:
    minio_root_user: "root"
    minio_root_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31343439333436316432343233633836613061653462626134376663376563386361313534666563
          3930643365343961643538333533303534653735643630640a643739353537333439313561636161
          62623735306661346465306432323661313266616662383038616335306163353635343761653862
          3435643464623734620a323565346434646239656333626364363532373038393534326333333065
          39303335343032343034366434313437383038666134376339306334326637353738
    minio_user_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31396362633362396130343031313738326430623530353265316535653033316261353938316435
          3736616161323237346164303761653330383438313635620a343438313162356136656536393862
          66643063353537326163633264313531363265353833643365306439313039343461313837656630
          3462356262633632380a386132303466356566383134393534626537643439666438326464633430
          36613035646335636465356530653861613838383162393530643066363365343665
    velero_user_key_id: "minio"
    velero_user_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61383337666632316332616662383765363665396565333834666533633639656461373433666232
          3536383537326137613339636632613362303733336234630a643833393564326131323762353037
          34323437393133356237306263616330633539393539326261363865386338633164323933646436
          3933323438303831310a396637393165376130373234316435393332663861313361393435396566
          62336236333562343338373338366664653030386265366337303564666532376163
    truenas_host: "10.0.1.10"
    truenas_apikey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66326264363635353537643263316465656438613763393563306564663361316562343635323830
          3262353766616230336265363130386234623734646365620a613332626561313261393237643336
          64623836623563303630656530303266306538353064343739643938653832336463613337363262
          6530373961323836360a656136316639613535393137323361376432353665356531303239356163
          35363963613030313466363437303164646464393035663566363032313337343330396435613065
          36323964373934396331386239326436383263616434643136666131353831656435316332363864
          38373437646262626139636231643830393330656430663039336161613934383938633435376463
          37383837373239356362
    truenas_ssh_user: "root"
    truenas_ssh_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37636532333932656362653762613037373662353265393537396635316639653138626664613038
          3364346263636334613761646635386666313138613232610a613665313366353636373939643631
          30353933646236386436656664366539336635386131663739373935626233653963386266356634
          3436396435663864630a303261346661333935666234333262386661376534336132656331343338
          3439
    truenas_share_user: "root"
    truenas_share_group: "wheel"
    truenas_dataset_user: "0"
    truenas_dataset_group: "0"
    truenas_share_network: 10.0.1.0/24
    mysql_root_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34346564383562653538396537393964666430353164373366626330346435663835376264646664
          3066393530663439623031636430643234613731313237320a373036613032663333616535393232
          30616132393438643338373361613532643366646330323264656134343635613364353933316238
          3262393636613336330a326663633163326430363533633434666430613766333535626336326537
          64613263356261343135396661326633636435366339623166373136383665613831
    mysql_user_name: mysql
    mysql_user_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30653530373166353661653431643464643265383661376166303133313930363962333536643761
          3535613763313062363735626462376432373936313439340a383830643139313564636536623939
          66333135653931643032313839363637633463313233333738353834383337623533616263626339
          6665343235323135620a656239366431373663656264353839326234653563346161353932363532
          38633330323336626233336133636532353931353735363162633364616664636130
    gitea_db_name: "mysql_giteadb"
    gitea_db_host: "mysql.database.svc.cluster.local:3306"
    gitea_db_url: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36636165323733653734336331326161363866636134613234386362313539326633643237653736
          3035316330316432353030373239373936643663373964340a656561663130323565396538356531
          36383765313534396362636530633731313631353962343166613362623061366262343531343732
          6361393539623434300a613439313739333634303161336236363663616231366135353730343336
          31346331616430653535376665386632343262373235316535346665366663353366353331393139
          32353863343134616234636238656535306435653439633737366436313434366662656136316132
          64633034313836643239616138386435623264356362656166323239623731323632386131376339
          61663130653634343561363032373839323639313665343364343332303632643731376564343735
          6563
    gitea_admin_username: "git-admin"
    gitea_admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31353564373330643562356164393632663531306362616237623764623761633537333134636535
          3164633930653931336330386134616262633832303731310a333039613935306565356337313233
          65363161653936373534336637623364396239356534386536386639623164303636366230323439
          6630316561633233320a373131363464313430343231363039396636663363653130323965616565
          66616630653239343864383530383331353833616537396637393738376562663937
    vaultwarden_admin_token: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39326337613565373136646236343565656535373739393563613731653939353238356163663632
          3761333235653039313231356539626531636534656361660a323930326466333765663539356133
          35346239666164333036323365393333383465633031636261376539636331333561623234316435
          3434623764616536310a613363643730653461613139366634386136666663326531336131643861
          61636136393165663937333430623932373939333937393733333564633162653335613331396637
          34316164636339306463303061343630306536353930633130383762373431306433336437326638
          38373930303737323330386332656238346230383639303432303562316234313565313966313364
          64636630393865363933333932386464666665363562396531373338356337346363623134303739
          3362
    nextcloud_db_name: "mysql_nextcloud"
    vaultwarden_db_name: "mysql_vaultwarden"
    diun_apikey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31353334303838346537356138393466343035373639303763363737623264623166333565363733
          3730366333333739383366313031306238313239346339640a333336333039616364636434633636
          36396334383464646362666165663437313733373735346232303239353836643737393936623934
          6134303066303730610a363833333732383766643366623837666237323430643563643738623038
          62313435656438663338303439663163343238306463376237383962643637316634333266336561
          66336565326164666534363337366436653734326662386533313837666237663064663365366564
          36363132623430333766346237656539663665633461373633653239323361326463613539383261
          61633339643261316335656531646466653863633364353436343536336463643063313862656436
          30616265663337666530663261363730363037353631333534666535316430303436366136653335
          3836636162383639653830383534663636316430333931356631
    betanin_config_toml: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32636331316664666538383761633434316265623437626335396633306166386536613039326466
          6465326236646137336439303965373337373662393132390a393633376338386638666563643934
          33313239666536333563376431376237393735373139636435383534616366616565366663663962
          3332646438373239310a623163383132356537316331396539323364306637336230366538343330
          34643533323737356461316638306439366133323238653934306462636165373465633061623263
          61616236643639333862656338646466373266333665623561346262363362333134346635613632
          61356531653461366436643964346130336536313731326365663632316434313066346561396364
          39373365666435346436383963353431383738643937323865376365616539363464616436663566
          35356338376239353061643336386162646437373933653333626135393565303262643936333034
          39663262623636616666656536303663613565663664626137363731303636323631363738626233
          62636363326236303561643365313564616666363635636335366233323832333164623232643566
          65353664643337663432626166316234653931646232373265376265373138343636306462643834
          32383838306664323332343461346564373665326262653531306333656563363335626138613062
          39653231623362356266663564643737633061383065313930326339393561346465666135343362
          65376132626439643731353562666131376566353061303066623531626165303938663135386537
          62656336343164643438646462353861323664663036656364336465343565646262666661303931
          33663766373430393634386165653131353166303165356465306462306431353666656233343231
          63373063613061656261656564653933613235646335333831303931333366343433666233663539
          64636634643438636133343961653138663533386137363033343532643434333864326338663066
          31363132373632613466643463373338373164366237653039343564346563313632656165313232
          61356135356261353962666535623532386439326632333431323831383766656161353963383531
          30353661643062316235633931326339376132356439333237313562326339623730616135376363
          38313764353432613466373032666666616630396436306430623564623732343463346266346230
          61346636653362666233303264636462643264646563353537666534363164333966393762633933
          35376538323132363437376332623632373162613533656439323832333738646238343237656634
          35643564666133376636313662376531363633303964623863396333373263656663356338386335
          36656361613837323031356665386136363835623561363231366535353832386638316266613137
          38643236623136646536613132366338366162376163343662353934316261333239386633336536
          33323264643632626365623733346238393930626635383662386435396366366439646336623433
          61313233323831363562663239663065663835303464346562363662643562633831313038613534
          66663663376234663763353630633330306439313536666439646566383136383738306461656564
          61383564373036386537333537613436356135663337343866663261643865646665333438306662
          35646561623832653265613461666261353664303561323864383931333261653161323563353832
          30376539353637653264626136633665313831633334343431646230336232636663626261333631
          34313636663234383464313832396532313964323131353034663565306332383166313634616662
          63373231646439366264636163663835363838323737666466373633373531376237363334373163
          39663534343730353132663932316133666261613330353233303230666533633234363966643534
          62393738313433613934613138313165383761323135336333323136653634353636646535656161
          353834633438383061636135333762633432
    nextcloud_admin_username: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32323330333761313230353563653132393836313837623562393438393038623930656536396334
          3039396237656131373765633231313435366632323032630a363965316131343762393832326234
          34363865616636323364343761643364633964373233366332396333636462343430616162313464
          3734393064363032350a363236323765373732623531303538633430373738323263633965306236
          6239
    nextcloud_admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35663639323831353234646362643736653161363462386263393461323935616133323766623066
          6263626631366130613633643566343832613330643830310a333034383737343963336361643539
          64633831336632373665623432353732636138633737373930303232636133346662313635353537
          3261356336363163370a626234636438323238346265653765353562663936336433646138386232
          3764
    cert_manager_email: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33636331623032656131633330616130663334316636383566343765663766316564643962346663
          6237373039643661626437656164303663383530646536610a633262393062356332323339303165
          36363135326638333464653664343832303637353862373935383732316133646531323231613532
          3264316334336337640a333733663134623631633633323030313763366337373266356431373166
          34336265653431363235333930343963616539383235646162646161666161363236
    argo_admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61326466393631633737636636666166646538303863396539386636393164653830643363363138
          3266316262393463316230363232346636666564626439620a353666343630356534353665616632
          61613563373565363330363462323231356330303335343236386631356438393762663366326433
          3863353538623132330a636131646631363663346534633364633035633131656232383430383333
          64323534376565393430396261643030613734663361653661346232306630313666
  tasks:
  - name: Get secrets
    find:
      paths: "../secrets/"
      patterns: "*.yaml.j2"
    register: secrets
  - name: Template secrets
    shell: |-
     kubeseal -o yaml > ../charts/secrets/templates/"{{item|basename|splitext|first}}" << {{ lookup('template', item) }}
    args:
      executable: /bin/bash
    loop: "{{secrets.files|map(attribute='path')|list}}"
